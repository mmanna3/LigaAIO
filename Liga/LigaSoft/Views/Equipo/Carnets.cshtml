@using LigaSoft.ExtensionMethods
@using LigaSoft.Models.Enums
@model List<LigaSoft.Models.ViewModels.JugadorCarnetVM>

<style>
	.contenedor-general {
		display: grid;
		grid-template-columns: auto auto auto;
		gap: 20px;
		padding: 20px;
	}

	.carnet-contenedor {
		width: 300px;
		height: 600px;
		border: none;
		border-radius: 20px;
		padding: 25px;
		background: #01582e;
		box-shadow: 0 4px 8px rgba(0,0,0,0.2);
		display: flex;
		flex-direction: column;
		position: relative;
		overflow: hidden;
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}

	@@media print {
		.carnet-contenedor {
			break-inside: avoid;
			background: #01582e !important;
			-webkit-print-color-adjust: exact !important;
			print-color-adjust: exact !important;
		}

		.titulo {
			color: white !important;
		}

		.subtitulo {
			color: rgba(255, 255, 255, 0.8) !important;
		}

		.campo-label {
			color: rgba(255, 255, 255, 0.7) !important;
		}

		.campo-valor {
			color: white !important;
		}

		.cantidadDeAmarillas {
			color: white !important;
		}

		.divisor {
			border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
		}

		.campo {
			border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
		}
	}

	.header {
		text-align: center;		
		position: relative;
		z-index: 1;
	}

	.titulo {
		font-size: 24px;
		font-weight: bold;
		margin-bottom: 5px;
		color: white;
	}

	.subtitulo {
		font-size: 16px;
		color: rgba(255, 255, 255, 0.8);
		font-weight: normal;
	}

	.divisor {
		width: 100%;
		height: 2px;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);		
		margin: 15px 0;
		position: relative;
		z-index: 1;
	}

	.imagen-container {
		width: 100%;
		display: flex;
		justify-content: center;
		margin-bottom: 25px;
		position: relative;
		z-index: 1;
	}

	.imagen {
		width: 200px;
		height: 200px;
		border-radius: 10px;
		object-fit: cover;
		border: 3px solid rgba(255, 255, 255, 0.2);
	}

	.datos {
		width: 100%;
		margin-bottom: 20px;
		position: relative;
		z-index: 1;
	}

	.campo {
		display: flex;
		justify-content: space-between;
		margin-bottom: 18px;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		padding-bottom: 8px;
	}

	.campo-label {
		color: rgba(255, 255, 255, 0.7);
		font-size: 16px;
	}

	.campo-valor {
		color: white;
		font-weight: 500;
		font-size: 16px;
	}

	.suspendido {
		background-color: #e81f05;
		color: white;
		padding: 8px;
		border-radius: 5px;
		text-align: center;
		margin-bottom: 15px;
		font-weight: bold;
		letter-spacing: 1px;
		position: relative;
		z-index: 1;
	}

	.logo {
		width: 200px;
		position: absolute;
		right: -25px;
		bottom: -25px;
		opacity: 0.1;
		transform: rotate(-15deg);
	}

	.tarjetas {
		position: absolute;
		right: 20px;
		top: 20px;
		display: flex;
		gap: 5px;
		z-index: 1;
	}

	.tarjetaAmarilla, .tarjetaRoja {
		width: 12px;
		height: 18px;
		display: inline-block;
		border: 1px solid rgba(255, 255, 255, 0.3);
		box-shadow: 0 1px 2px rgba(0,0,0,0.2);
	}

	.tarjetaAmarilla {
		background-color: #ffd700;
	}

	.tarjetaRoja {
		background-color: #e81f05;
	}

	.cantidadDeAmarillas {
		font-weight: bold;
		font-size: 14px;
		margin-right: 3px;
		color: white;
	}
</style>

@section Titulo{
	Carnets: @Model.First().Equipo - @Model.First().TipoLiga
}

@section Subtitulo{
	<div class="row">
		<div class="col-xs-6 col-md-2">
			@(Html.YKN().Button("Volver")
				.Color(BootstrapColorEnum.Danger)
				.Label("Volver")
				.FullWidth()
				.OnClickRedirect("Index", "Equipo"))
		</div>
		<div class="col-xs-6 col-md-2">
			@(Html.YKN().Button("Imprimir")
				  .Color(BootstrapColorEnum.Success)
				  .FullWidth()
				  .OnClickImprimir())
		</div>
	</div>
}

<div class="contenedor-general">
	@foreach (var carnet in Model)
	{
	<div class="carnet-contenedor">
		<div class="header">
			<div class="titulo">@carnet.Equipo</div>
			<div class="subtitulo">@carnet.TipoLiga</div>
		</div>
		
		<div class="divisor"></div>

		<div class="imagen-container">
			<img class="imagen" src="@carnet.FotoPath" alt="foto" />
		</div>

		<div class="datos">
			@if (carnet.Estado == EstadoJugador.Inhabilitado || carnet.Estado == EstadoJugador.Suspendido)
			{
				<div class="suspendido">@carnet.EstadoDescripcion</div>
			}
			
			<div class="campo">
				<span class="campo-label">DNI:</span>
				<span class="campo-valor">@carnet.DNI</span>
			</div>
			<div class="campo">
				<span class="campo-label">Nombre:</span>
				<span class="campo-valor">@carnet.Nombre</span>
			</div>
			<div class="campo">
				<span class="campo-label">Apellido:</span>
				<span class="campo-valor">@carnet.Apellido</span>
			</div>
			<div class="campo">
				<span class="campo-label">Fecha Nac:</span>
				<span class="campo-valor">@carnet.FechaNacimiento</span>
			</div>
			<div class="campo">
				<span class="campo-label">Categoría:</span>
				<span class="campo-valor">Cat @carnet.FechaNacimiento.Substring(carnet.FechaNacimiento.Length - 4)</span>
			</div>
		</div>

		<img class="logo" src="../../Content/logo.svg" alt="EDEFI" />
		
		<div class="tarjetas">
			@if (carnet.TarjetasAmarillas != 0)
			{
				<div>
					<span class="cantidadDeAmarillas">@carnet.TarjetasAmarillas</span>
					<span class="tarjetaAmarilla"></span>
				</div>
			}
			@if (carnet.TarjetasRojas != 0)
			{
				<div>
					<span class="cantidadDeAmarillas">@carnet.TarjetasRojas</span>
					<span class="tarjetaRoja"></span>
				</div>
			}
		</div>
	</div>
	}
</div>

